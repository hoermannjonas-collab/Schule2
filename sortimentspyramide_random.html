<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sortimentspyramide - √úbung</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.5/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        * { touch-action: manipulation; }
    </style>
</head>
<body class="bg-slate-100">
    <div id="root"></div>
    
    <script type="text/babel">
        const { useState, useMemo } = React;

        const SortimentspyramideUebung = () => {
            // Pool mit 15 verschiedenen Beispielen
            const allExamples = [
                {
                    name: 'Kopfh√∂rer',
                    emoji: 'üéß',
                    color: 'from-blue-500 to-blue-600',
                    items: {
                        'Sortimentsbereich': 'Unterhaltungselektronik',
                        'Warengruppe': 'TV & Audio',
                        'Warenart': 'Kopfh√∂rer',
                        'Artikel': 'Sony WH-1000XM5',
                        'Sorte': 'Schwarz, Bluetooth 5.2'
                    }
                },
                {
                    name: 'Fu√üball',
                    emoji: '‚öΩ',
                    color: 'from-green-500 to-green-600',
                    items: {
                        'Sortimentsbereich': 'Sportartikel',
                        'Warengruppe': 'Ballsportarten',
                        'Warenart': 'Fu√üb√§lle',
                        'Artikel': 'Adidas Tiro League',
                        'Sorte': 'Gr√∂√üe 5, wei√ü/schwarz'
                    }
                },
                {
                    name: 'Joghurt',
                    emoji: 'ü•õ',
                    color: 'from-purple-500 to-purple-600',
                    items: {
                        'Sortimentsbereich': 'Lebensmittel',
                        'Warengruppe': 'Molkereiprodukte',
                        'Warenart': 'Joghurt',
                        'Artikel': 'M√ºller Froop',
                        'Sorte': 'Erdbeere, 150g'
                    }
                },
                {
                    name: 'Sneaker',
                    emoji: 'üëü',
                    color: 'from-orange-500 to-orange-600',
                    items: {
                        'Sortimentsbereich': 'Textil/Bekleidung',
                        'Warengruppe': 'Schuhe',
                        'Warenart': 'Sneaker',
                        'Artikel': 'Nike Air Force 1',
                        'Sorte': 'Wei√ü, Gr√∂√üe 42'
                    }
                },
                {
                    name: 'Laptop',
                    emoji: 'üíª',
                    color: 'from-slate-500 to-slate-600',
                    items: {
                        'Sortimentsbereich': 'Elektronik',
                        'Warengruppe': 'Computer',
                        'Warenart': 'Laptops',
                        'Artikel': 'Apple MacBook Air',
                        'Sorte': 'M2, 256GB, Silber'
                    }
                },
                {
                    name: 'Sofa',
                    emoji: 'üõãÔ∏è',
                    color: 'from-amber-500 to-amber-600',
                    items: {
                        'Sortimentsbereich': 'M√∂bel',
                        'Warengruppe': 'Polsterm√∂bel',
                        'Warenart': 'Sofas',
                        'Artikel': 'IKEA Kivik',
                        'Sorte': '3-Sitzer, grau'
                    }
                },
                {
                    name: 'Shampoo',
                    emoji: 'üß¥',
                    color: 'from-pink-500 to-pink-600',
                    items: {
                        'Sortimentsbereich': 'Drogerie',
                        'Warengruppe': 'Haarpflege',
                        'Warenart': 'Shampoo',
                        'Artikel': 'Nivea Men Strong Power',
                        'Sorte': '250ml, f√ºr M√§nner'
                    }
                },
                {
                    name: 'Pizza',
                    emoji: 'üçï',
                    color: 'from-red-500 to-red-600',
                    items: {
                        'Sortimentsbereich': 'Tiefk√ºhlkost',
                        'Warengruppe': 'Fertiggerichte',
                        'Warenart': 'Pizza',
                        'Artikel': 'Dr. Oetker Ristorante',
                        'Sorte': 'Salame, 320g'
                    }
                },
                {
                    name: 'Fahrrad',
                    emoji: 'üö≤',
                    color: 'from-cyan-500 to-cyan-600',
                    items: {
                        'Sortimentsbereich': 'Sportartikel',
                        'Warengruppe': 'Radsport',
                        'Warenart': 'Mountainbikes',
                        'Artikel': 'Cube Analog',
                        'Sorte': '29 Zoll, schwarz'
                    }
                },
                {
                    name: 'Fernseher',
                    emoji: 'üì∫',
                    color: 'from-indigo-500 to-indigo-600',
                    items: {
                        'Sortimentsbereich': 'Unterhaltungselektronik',
                        'Warengruppe': 'TV-Ger√§te',
                        'Warenart': 'LED-Fernseher',
                        'Artikel': 'Samsung QLED Q60',
                        'Sorte': '55 Zoll, 4K'
                    }
                },
                {
                    name: 'Kaffee',
                    emoji: '‚òï',
                    color: 'from-yellow-600 to-yellow-700',
                    items: {
                        'Sortimentsbereich': 'Lebensmittel',
                        'Warengruppe': 'Hei√ügetr√§nke',
                        'Warenart': 'Kaffeebohnen',
                        'Artikel': 'Lavazza Crema e Aroma',
                        'Sorte': '1kg, ganze Bohnen'
                    }
                },
                {
                    name: 'Jeans',
                    emoji: 'üëñ',
                    color: 'from-blue-600 to-blue-700',
                    items: {
                        'Sortimentsbereich': 'Textil/Bekleidung',
                        'Warengruppe': 'Herrenbekleidung',
                        'Warenart': 'Hosen',
                        'Artikel': "Levi's 501 Original",
                        'Sorte': 'W32/L32, stonewashed'
                    }
                },
                {
                    name: 'Parfum',
                    emoji: '‚ú®',
                    color: 'from-violet-500 to-violet-600',
                    items: {
                        'Sortimentsbereich': 'Drogerie',
                        'Warengruppe': 'D√ºfte',
                        'Warenart': 'Herrenparfum',
                        'Artikel': 'Hugo Boss Bottled',
                        'Sorte': 'Eau de Toilette, 100ml'
                    }
                },
                {
                    name: 'Smartphone',
                    emoji: 'üì±',
                    color: 'from-teal-500 to-teal-600',
                    items: {
                        'Sortimentsbereich': 'Elektronik',
                        'Warengruppe': 'Mobilger√§te',
                        'Warenart': 'Smartphones',
                        'Artikel': 'iPhone 15 Pro',
                        'Sorte': '256GB, Titanblau'
                    }
                },
                {
                    name: 'Wein',
                    emoji: 'üç∑',
                    color: 'from-rose-600 to-rose-700',
                    items: {
                        'Sortimentsbereich': 'Getr√§nke',
                        'Warengruppe': 'Alkoholische Getr√§nke',
                        'Warenart': 'Rotwein',
                        'Artikel': 'Barolo DOCG',
                        'Sorte': '2019, 0,75l'
                    }
                }
            ];

            // Funktion zum Mischen eines Arrays
            const shuffleArray = (array) => {
                const shuffled = [...array];
                for (let i = shuffled.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
                }
                return shuffled;
            };

            // Zuf√§llig 2 Beispiele ausw√§hlen und Items mischen (nur einmal beim ersten Laden)
            const { selectedExamples, shuffledItems, correctAnswers } = useMemo(() => {
                const shuffledExamples = shuffleArray(allExamples);
                const selected = [shuffledExamples[0], shuffledExamples[1]];
                
                // Alle Items sammeln
                const items = [];
                const answers = {
                    'Sortimentsbereich': [],
                    'Warengruppe': [],
                    'Warenart': [],
                    'Artikel': [],
                    'Sorte': []
                };

                selected.forEach(example => {
                    Object.keys(example.items).forEach(level => {
                        items.push({
                            text: example.items[level],
                            color: example.color,
                            example: example.name
                        });
                        answers[level].push(example.items[level]);
                    });
                });

                return {
                    selectedExamples: selected,
                    shuffledItems: shuffleArray(items),
                    correctAnswers: answers
                };
            }, []);

            const [placements, setPlacements] = useState({
                'Sortimentsbereich': [],
                'Warengruppe': [],
                'Warenart': [],
                'Artikel': [],
                'Sorte': []
            });
            const [showResults, setShowResults] = useState(false);
            const [score, setScore] = useState(null);
            const [selectedItem, setSelectedItem] = useState(null);

            // Pyramide: Sorte oben (schmal), Sortimentsbereich unten (breit)
            const pyramidLevels = [
                { level: 5, name: 'Sorte', color: 'bg-blue-500', width: '40%' },
                { level: 4, name: 'Artikel', color: 'bg-green-500', width: '55%' },
                { level: 3, name: 'Warenart', color: 'bg-yellow-500', width: '70%' },
                { level: 2, name: 'Warengruppe', color: 'bg-orange-500', width: '85%' },
                { level: 1, name: 'Sortimentsbereich', color: 'bg-red-500', width: '100%' }
            ];

            const placedItems = Object.values(placements).flat();
            
            const availableItems = shuffledItems.filter(
                item => !placedItems.includes(item.text)
            );

            const getItemColor = (text) => {
                const item = shuffledItems.find(i => i.text === text);
                return item ? item.color : 'from-gray-500 to-gray-600';
            };

            const handleItemClick = (item) => {
                if (selectedItem === item) {
                    setSelectedItem(null);
                } else {
                    setSelectedItem(item);
                }
            };

            const handleLevelClick = (levelName) => {
                if (selectedItem && placements[levelName].length < 2) {
                    setPlacements(prev => ({
                        ...prev,
                        [levelName]: [...prev[levelName], selectedItem]
                    }));
                    setSelectedItem(null);
                }
            };

            const handleRemove = (levelName, itemToRemove, e) => {
                e.stopPropagation();
                setPlacements(prev => ({
                    ...prev,
                    [levelName]: prev[levelName].filter(item => item !== itemToRemove)
                }));
            };

            const checkAnswers = () => {
                let correct = 0;
                pyramidLevels.forEach(level => {
                    const placed = placements[level.name];
                    const correct_items = correctAnswers[level.name];
                    placed.forEach(item => {
                        if (correct_items.includes(item)) {
                            correct++;
                        }
                    });
                });
                setScore(correct);
                setShowResults(true);
            };

            const resetExercise = () => {
                // Seite neu laden f√ºr neue zuf√§llige Beispiele
                window.location.reload();
            };

            const isItemCorrect = (levelName, item) => {
                return correctAnswers[levelName].includes(item);
            };

            const totalPlaced = Object.values(placements).flat().length;

            return (
                <div className="min-h-screen bg-gradient-to-b from-slate-100 to-slate-200 p-3 md:p-8">
                    <div className="max-w-4xl mx-auto">
                        {/* Header */}
                        <div className="text-center mb-4">
                            <h1 className="text-xl md:text-3xl font-bold text-slate-800 mb-1">
                                üè™ Sortimentspyramide
                            </h1>
                            <p className="text-slate-600 text-sm md:text-base">
                                Ordne alle Begriffe zu ‚Äì je 2 pro Ebene!
                            </p>
                            <div className="flex justify-center gap-4 mt-2 text-xs">
                                {selectedExamples.map((ex, idx) => (
                                    <span key={idx} className="flex items-center gap-1">
                                        <span className={`w-3 h-3 rounded bg-gradient-to-r ${ex.color}`}></span>
                                        {ex.emoji} {ex.name}
                                    </span>
                                ))}
                            </div>
                        </div>

                        {/* Draggable Items */}
                        <div className="bg-white rounded-xl shadow-lg p-3 mb-4">
                            <h2 className="text-sm font-semibold text-slate-700 mb-2">
                                üì¶ Begriffe {selectedItem ? <span className="text-blue-600">(ausgew√§hlt: {selectedItem})</span> : '(antippen zum Ausw√§hlen)'}:
                            </h2>
                            <div className="flex flex-wrap gap-2 min-h-[50px]">
                                {availableItems.length > 0 ? (
                                    availableItems.map((item, index) => (
                                        <div
                                            key={index}
                                            onClick={() => handleItemClick(item.text)}
                                            className={`px-3 py-2 bg-gradient-to-r ${item.color} text-white rounded-lg cursor-pointer shadow-md transition-all text-xs md:text-sm select-none ${
                                                selectedItem === item.text ? 'ring-4 ring-yellow-400 scale-105' : 'hover:scale-105 active:scale-95'
                                            }`}
                                        >
                                            {item.text}
                                        </div>
                                    ))
                                ) : (
                                    <p className="text-slate-400 italic text-sm">‚úì Alle Begriffe zugeordnet!</p>
                                )}
                            </div>
                        </div>

                        {/* Pyramid */}
                        <div className="bg-white rounded-xl shadow-lg p-3 md:p-4 mb-4">
                            <h2 className="text-sm font-semibold text-slate-700 mb-3">
                                üî∫ Pyramide (je 2 Begriffe pro Ebene):
                            </h2>
                            <div className="flex flex-col items-center gap-2">
                                {pyramidLevels.map((level) => (
                                    <div
                                        key={level.level}
                                        style={{ width: level.width }}
                                        className="transition-all duration-300"
                                    >
                                        <div
                                            data-level={level.name}
                                            onClick={() => handleLevelClick(level.name)}
                                            className={`${level.color} rounded-lg p-2 md:p-3 transition-all cursor-pointer ${
                                                placements[level.name].length < 2 ? 'border-2 border-dashed border-white/50' : ''
                                            } ${
                                                selectedItem && placements[level.name].length < 2 ? 'animate-pulse' : ''
                                            }`}
                                        >
                                            <div className="flex flex-col gap-1">
                                                <div className="flex justify-between items-center">
                                                    <span className="text-white font-bold text-xs md:text-sm">
                                                        {level.level}. {level.name}
                                                    </span>
                                                    <span className="text-white/70 text-xs">
                                                        {placements[level.name].length}/2
                                                    </span>
                                                </div>
                                                
                                                <div className="flex flex-wrap gap-1 min-h-[32px]">
                                                    {placements[level.name].length > 0 ? (
                                                        placements[level.name].map((item, idx) => (
                                                            <div key={idx} className="flex items-center gap-1">
                                                                <span className={`bg-gradient-to-r ${getItemColor(item)} text-white px-2 py-1 rounded text-xs md:text-sm font-medium ${
                                                                    showResults ? (isItemCorrect(level.name, item) ? 'ring-2 ring-green-300' : 'ring-2 ring-red-300') : ''
                                                                }`}>
                                                                    {item}
                                                                    {showResults && (
                                                                        <span className="ml-1">
                                                                            {isItemCorrect(level.name, item) ? '‚úÖ' : '‚ùå'}
                                                                        </span>
                                                                    )}
                                                                </span>
                                                                {!showResults && (
                                                                    <button
                                                                        onClick={(e) => handleRemove(level.name, item, e)}
                                                                        className="bg-white/30 hover:bg-white/50 text-white rounded-full w-5 h-5 flex items-center justify-center text-xs transition-colors"
                                                                    >
                                                                        ‚úï
                                                                    </button>
                                                                )}
                                                            </div>
                                                        ))
                                                    ) : (
                                                        <span className="text-white/60 italic text-xs">
                                                            {selectedItem ? 'üëÜ Hier tippen!' : '2 Begriffe zuordnen...'}
                                                        </span>
                                                    )}
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                ))}
                            </div>
                        </div>

                        {/* Results */}
                        {showResults && (
                            <div className={`rounded-xl p-3 mb-4 text-center ${
                                score === 10 ? 'bg-green-100 border-2 border-green-400' : 'bg-amber-100 border-2 border-amber-400'
                            }`}>
                                <p className="text-lg font-bold">
                                    {score === 10 ? 'üéâ Perfekt!' : 'üìù Ergebnis:'} {score}/10 richtig!
                                </p>
                                {score < 10 && (
                                    <p className="text-slate-600 text-sm mt-1">
                                        Von spezifisch (oben) ‚Üí allgemein (unten)
                                    </p>
                                )}
                            </div>
                        )}

                        {/* Buttons */}
                        <div className="flex justify-center gap-3">
                            {!showResults ? (
                                <button
                                    onClick={checkAnswers}
                                    disabled={totalPlaced < 10}
                                    className={`px-5 py-3 rounded-lg font-bold text-white transition-all text-sm ${
                                        totalPlaced < 10
                                            ? 'bg-slate-400 cursor-not-allowed'
                                            : 'bg-green-600 hover:bg-green-700 shadow-lg active:scale-95'
                                    }`}
                                >
                                    ‚úì √úberpr√ºfen ({totalPlaced}/10)
                                </button>
                            ) : (
                                <button
                                    onClick={resetExercise}
                                    className="px-5 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-bold shadow-lg transition-all active:scale-95 text-sm"
                                >
                                    üîÑ Neue Aufgabe
                                </button>
                            )}
                        </div>

                        {/* Info Box */}
                        <details className="mt-4 bg-slate-50 rounded-xl border border-slate-200">
                            <summary className="p-3 font-semibold text-slate-700 cursor-pointer text-sm">
                                üí° Info zur Sortimentspyramide
                            </summary>
                            <div className="px-3 pb-3">
                                <ul className="text-xs text-slate-600 space-y-1">
                                    <li><strong>5. Sorte:</strong> Spezifische Variante (z.B. Farbe, Gr√∂√üe, Ausstattung)</li>
                                    <li><strong>4. Artikel:</strong> Konkretes Produkt mit Marke/Modell</li>
                                    <li><strong>3. Warenart:</strong> Gleichartige Artikel (z.B. Kopfh√∂rer, Fu√üb√§lle)</li>
                                    <li><strong>2. Warengruppe:</strong> Zusammengeh√∂rige Warenarten (z.B. TV & Audio)</li>
                                    <li><strong>1. Sortimentsbereich:</strong> Breiteste Kategorie (z.B. Elektronik, Lebensmittel)</li>
                                </ul>
                            </div>
                        </details>

                        {/* Pool Info */}
                        <p className="text-center text-slate-400 text-xs mt-4">
                            üìö Datenpool: 15 verschiedene Produkte ‚Äì bei jedem Laden neue Beispiele!
                        </p>
                    </div>
                </div>
            );
        };

        ReactDOM.render(<SortimentspyramideUebung />, document.getElementById('root'));
    </script>
</body>
</html>
